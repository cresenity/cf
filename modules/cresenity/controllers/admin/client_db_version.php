<?php defined('SYSPATH') OR die('No direct access allowed.');class Client_db_version_Controller extends CController {		public function index() {		$app = CApp::instance();		$app->title(clang::__('Client DB Version'));				$data = cdata::get('current_client_version');		$db_version = "";		if($data&&isset($data["db_version"])) {			$db_version = $data["db_version"];		}		$db_version_array = explode(".",$db_version);		$major_version = "";		$minor_version = "";		$revision = "";				if(count($db_version_array)>0) $major_version = $db_version_array[0];		if(count($db_version_array)>1) $minor_version = $db_version_array[1];		if(count($db_version_array)>2) $revision = $db_version_array[2];								$post = $this->input->post();		if ($post!=null) {			$error = 0;			$error_message = "";					$major_version = $post["major_version"];			$minor_version = $post["minor_version"];			$revision = $post["revision"];			$db_version = $major_version;			if(strlen($minor_version)>0) $db_version.=".".$minor_version;			if(strlen($minor_version)>0&&strlen($revision)>0) $db_version.=".".$revision;						if($error==0) {				$data["db_version"] = $db_version;				cdata::set('current_client_version',$data);			}						if ($error==0) {								cmsg::add("success","Your Client DB Version Successfully Modified !");											} else {				cmsg::add("error",$error_message);							}					}										$f = $app->add_form()->set_enctype('multipart/form-data');		$w = $f->add_widget();		$w->set_title('Client DB Version');		$w->set_icon('cog');		$tzlist = ctimezone::timezone_list();		$div = $w->add_div()->add_class('row-fluid');				$w->add_field()->set_label("Major Version")->add_control('major_version','text')->add_validation('required')->set_value($major_version);		$w->add_field()->set_label("Minor Version")->add_control('minor_version','text')->add_validation('required')->set_value($minor_version);		$w->add_field()->set_label("Revision")->add_control('revision','text')->add_validation('required')->set_value($revision);				$acts = $w->add_action_list();		$act_next = $acts->add_action();				$act_next->set_label('Submit')->set_submit(true);								echo $app->render();			}	}